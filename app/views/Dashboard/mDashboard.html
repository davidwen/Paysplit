#{extends 'mobile-main.html' /}

<div class="dashboard-content">
  <div class="dashboard-balanced-owed-by">
    #{if positiveBalance > 0}
      <a class="balance-display dashboard-unbalanced" href="@{Balances.showBalances()}">
        $${positiveBalance.format("0.00")} owed by you
      </a>
    #{/if}
    #{else}
      <a class="balance-display dashboard-balanced" href="@{Balances.showBalances()}">
        No money owed by you
      </a>
    #{/else}
  </div>
  <div class="dashboard-balanced-owed-to">
    #{if negativeBalance > 0}
      <a class="balance-display dashboard-unbalanced" href="@{Balances.showBalances()}">
        <span>$${negativeBalance.format("0.00")} owed to you</span>
      </a>
    #{/if}
    #{else}
      <a class="balance-display dashboard-balanced" href="@{Balances.showBalances()}">
        <span>No money owed to you</span>
      </a>
    #{/else}
  </div>

  <div class="clear"></div>

  <div class="dashboard-recent-transactions">
    <div class="dashboard-table-label">Recent Transactions</div>
    <table class="displaytable">
      <thead>
        <tr>
          <td style="width: 18%">Type</td>
          <td style="width: 25%">From</td>
          <td style="width: 25%">To</td>
          <td style="width: 14%">Amount</td>
          <td style="width: 18%">Date</td>
        </tr>
      </thead>
      #{if transactions.isEmpty()}
        <tr>
          <td colspan="5">No Recent Transactions</td>
        </tr>
      #{/if}
      #{else}
        #{list items:transactions, as:'transaction'}
          <tr>
            <td><a href=${transaction.url}>${transaction.type}</a></td>
            <td><a href=@{Users.showUser(transaction.fromUser.id)}>${transaction.fromUser.username}</a></td>
            <td><a href=@{Users.showUser(transaction.toUser?.id)}>${transaction.toUser?.username}</a></td>
            <td>$${transaction.amount.format("0.00")}</td>
            <td>${transaction.addDate.format("MM/dd/yyyy")}</td>
          </tr>
        #{/list}
      #{/else}
    </table>
  </div>
</div>