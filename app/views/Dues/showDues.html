#{extends 'header.html' /} 
#{set title:'Paysplit - Splitting expenses made easy' /}
#{set headerText:'Display Dues' /}
#{set 'moreStyles'}
  <link rel="stylesheet" media="screen" href="@{'/public/datatables/media/css/demo_table.css'}">
  <link rel="stylesheet" media="screen" href="@{'/public/datatables/media/css/demo_page.css'}">
  <link rel="stylesheet" media="screen" href="@{'/public/datatables/media/css/demo_table_jui.css'}">
#{/set}
#{set 'moreScripts'}
  <script src="@{'/public/datatables/media/js/jquery.dataTables.js'}" type="text/javascript" charset="${_response_encoding}"></script>
#{/set}

<div class="two-column-container">
  <div class="two-column center">
    <h3>Dues Owed By ${user.username}</h3>
    <div class="table-container">
      <table id="dues-to-table" class="datatable">
        <thead>
          <tr>
            <td>Amount</td>
            <td>Owed To</td>
            <td>Expense</td>
            <td>Date</td>
          </tr>
        </thead>
        <tbody>
          #{list items:duesTo, as:'due'}
          <tr>
            <td>$${due.amount.format("0.00")}</td>
            <td>${due.toUser.username}</td>
            <td>${due.expense.description}</td>
            <td>${due.addDate.format("MM/dd/yyyy hh:mm a")}</td>
          </tr>
          #{/list}
        </tbody>
      </table>
    </div>
  </div>
  <div class="two-column center">
    <h3>Dues Owed To ${user.username}</h3>
    <div class="table-container">
      <table id="dues-from-table" class="datatable">
        <thead>
          <tr>
            <td>Amount</td>
            <td>Owed From</td>
            <td>Expense</td>
            <td>Date</td>
          </tr>
        </thead>
        <tbody>
          #{list items:duesFrom, as:'due'}
          <tr>
            <td>$${due.amount.format("0.00")}</td>
            <td>${due.fromUser.username}</td>
            <td>${due.expense.description}</td>
            <td>${due.addDate.format("MM/dd/yyyy hh:mm a")}</td>
          </tr>
          #{/list}
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
$(document).ready(function() {
	$('#dues-to-table').dataTable({
		"bJQueryUI" : true,
		"bInfo" : false,
		"bFilter" : false,
		"bPaginate" : false,
		"aaSorting" : [[3,'desc']],
		"oLanguage" : {
			"sEmptyTable" : "No dues owed from you"
		}
	});
	$('#dues-from-table').dataTable({
		"bJQueryUI" : true,
		"bInfo" : false,
		"bFilter" : false,
		"bPaginate" : false,
		"aaSorting" : [[3,'desc']],
		"oLanguage" : {
			"sEmptyTable" : "No dues owed by you"
		}
	});
});
</script>